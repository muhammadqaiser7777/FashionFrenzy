<!-- Header -->
<header class="dashboard-header">
  <div class="header-content">
    <div class="logo-section">
      <img src="../../../assets/Logos/Ready-Crop-Logo-Transparent (1).ico" alt="Ready Crop Logo" class="logo">
      <h1>Admin Dashboard</h1>
    </div>
    <div class="user-section">
      <span class="welcome-message">Welcome, {{ getUserName() }}!</span>
      <button class="logout-btn" (click)="logout()">Logout</button>
    </div>
  </div>
</header>

<!-- Main Content -->
<main class="dashboard-main">
  <div class="container">
    
    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-icon pending">‚è≥</div>
        <div class="stat-content">
          <h3>{{ stats.pending_products }}</h3>
          <p>Pending Approvals</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon approved">‚úÖ</div>
        <div class="stat-content">
          <h3>{{ stats.approved_products }}</h3>
          <p>Approved Products</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon rejected">‚ùå</div>
        <div class="stat-content">
          <h3>{{ stats.rejected_products }}</h3>
          <p>Rejected Products</p>
        </div>
      </div>
      
      <div class="stat-card">
        <div class="stat-icon retailers">üè™</div>
        <div class="stat-content">
          <h3>{{ stats.total_retailers }}</h3>
          <p>Active Retailers</p>
        </div>
      </div>
    </div>

    <!-- Product Approval Section -->
    <div class="product-approval-section">
      <div class="section-header">
        <h2>Product Approval Queue</h2>
        <div class="header-actions">
          <button class="btn-secondary" (click)="loadPendingProducts()" [disabled]="isLoading">
            <i class="icon">üîÑ</i>
            {{ isLoading ? 'Loading...' : 'Refresh' }}
          </button>
        </div>
      </div>
      
      <!-- Pending Products -->
      <div class="products-grid" *ngIf="!isLoading && pendingProducts.length > 0; else noProductsTemplate">
        <div class="product-card" *ngFor="let product of pendingProducts">
          <div class="product-image">
            <img 
              *ngIf="product.images && product.images.length > 0" 
              [src]="getProductImageUrl(product)" 
              [alt]="product.title"
              class="product-img"
              (error)="handleImageError($event)">
            <div *ngIf="!product.images || product.images.length === 0" class="no-image">
              üì∑
            </div>
            
            <div class="approval-badge pending">
              Pending Review
            </div>
          </div>
          
          <div class="product-info">
            <h3 class="product-title">{{ product.title }}</h3>
            <p class="product-category">{{ product.category }}</p>
            <p class="product-description">{{ product.description }}</p>
            
            <div class="product-pricing">
              <span class="current-price" *ngIf="product.discounted_price && product.discounted_price < product.price">
                {{ formatCurrency(product.discounted_price) }}
              </span>
              <span class="original-price" *ngIf="product.discounted_price && product.discounted_price < product.price">
                {{ formatCurrency(product.price) }}
              </span>
              <span class="current-price" *ngIf="!product.discounted_price || product.discounted_price >= product.price">
                {{ formatCurrency(product.price) }}
              </span>
            </div>
            
            <div class="product-details">
              <span class="retailer-info">üë§ Retailer: {{ product.retailer_name || 'Unknown' }}</span>
              <span class="stock-info">üì¶ Stock: {{ product.stock }} units</span>
            </div>
            
            <div class="product-actions">
              <button class="approve-btn" (click)="approveProduct(product)" [disabled]="product.actionLoading">
                <i class="icon">‚úÖ</i>
                {{ product.actionLoading ? 'Approving...' : 'Approve' }}
              </button>
              <button class="reject-btn" (click)="rejectProduct(product)" [disabled]="product.actionLoading">
                <i class="icon">‚ùå</i>
                {{ product.actionLoading ? 'Rejecting...' : 'Reject' }}
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- No Products Template -->
      <ng-template #noProductsTemplate>
        <div class="no-products" *ngIf="!isLoading">
          <div class="no-products-content">
            <h3>üéâ All Caught Up!</h3>
            <p>No products pending approval at the moment.</p>
          </div>
        </div>
        
        <div class="loading-container" *ngIf="isLoading">
          <div class="loading-spinner"></div>
          <p>Loading pending products...</p>
        </div>
      </ng-template>
    </div>

  </div>
</main>
